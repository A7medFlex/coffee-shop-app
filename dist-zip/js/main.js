let openBtn=document.querySelectorAll(".aboutItems .aboutItem .itemImg .btn"),clickSound=document.querySelector("#clicking");openBtn.forEach(e=>{e.addEventListener("click",e=>{clickSound.play(),openBtn.forEach(e=>{e.parentElement.classList.remove("active"),e.style.animation="none"}),e.currentTarget.parentElement.classList.add("active");let t=document.querySelectorAll(".aboutItem .itemOffCanvas img");t.forEach(e=>{e.remove()});let n=document.createElement("img");n.src=e.currentTarget.parentElement.firstChild.src,e.currentTarget.parentElement.nextSibling.appendChild(n)})});let closingBtn=document.querySelectorAll(".aboutItem .closing");closingBtn.forEach(e=>{e.addEventListener("click",()=>{openBtn.forEach(e=>{e.parentElement.classList.remove("active"),e.style.animation="btnAnim 0.5s ease infinite"})})});let questionbtnopen=document.querySelectorAll(".questions .s-question .q .fa-lock-alt"),questionbtnclose=document.querySelectorAll(".questions .s-question .q .fa-lock-open-alt");questionbtnopen.forEach(e=>{e.addEventListener("click",e=>{document.querySelector("#clickingAudio").play(),questionbtnopen.forEach(e=>{e.nextElementSibling.style.display="none",e.style.display="inline-block"});let t=document.querySelectorAll(".s-question .a");t.forEach(e=>{e.classList.remove("active")}),e.currentTarget.parentElement.nextSibling.classList.toggle("active"),e.currentTarget.style.display="none",e.currentTarget.nextSibling.style.display="inline-block"})}),questionbtnclose.forEach(e=>{e.addEventListener("click",e=>{e.currentTarget.style.display="none",e.currentTarget.previousSibling.style.display="inline-block",e.currentTarget.parentElement.nextSibling.classList.remove("active")})}),document.documentElement.style.setProperty("--intro-img",localStorage.getItem("introImg")),console.log(localStorage),liImgs=document.querySelectorAll(".images-cont li"),liImgs.forEach(e=>{e.addEventListener("click",e=>{document.querySelector("#clicking").play(),document.documentElement.style.setProperty("--intro-img",e.currentTarget.dataset.img),localStorage.setItem("introImg",e.currentTarget.dataset.img)})});const logo=document.querySelectorAll("#logo path");for(let e=0;e<logo.length;e++)console.log(`${e} => ${logo[e].getTotalLength()}`);let BossCont=document.querySelector("section.products-page .container .products-cont");function getProducts(){let e=new Promise((e,t)=>{let n=new XMLHttpRequest;n.open("GET","https://coffeshopapi.herokuapp.com/api/products/",!0),n.onload=function(){4==this.readyState&&200==this.status?e(JSON.parse(this.responseText)):t(Error(n.statusText))},n.onerror=()=>{t(Error("faild to fetch the json object"))},n.send()});e.then(e=>{jsProdObj=e,jsProdObjLen=e.length,filteringProducts(jsProdObj),showProducts(jsProdObj)}).catch(e=>{console.log(e)})}function filteringProducts(o){let t=document.querySelector(".searchingBox .inputSearch input");t.oninput=e=>{if(t.value){document.querySelectorAll(".filtering a").forEach(e=>{e.remove()});let t=new RegExp(e.currentTarget.value,"i");var n=o.filter(e=>e.name.match(t));for(i=0;i<n.length;i++){let e=document.createElement("a");e.href=`product.html?id=${n[i].id}`;var d=document.createTextNode(n[i].name);e.appendChild(d);let t=document.createElement("img");t.classList.add("searchingImg"),t.src=n[i].image,e.appendChild(t),document.querySelector(".filtering").appendChild(e)}}else document.querySelectorAll(".filtering a").forEach(e=>{e.remove()})}}function showProducts(s){for(let r=1;r<=s.length;r++){let e=document.createElement("div");e.classList.add("product");let t=document.createElement("div");t.classList.add("product-image"),t.style.backgroundImage=`url("${s[r].image}")`;let n=document.createElement("a");n.classList.add("imgLink"),n.href=`product.html?id=${s[r].id}`,n.appendChild(t);let d=document.createElement("div");d.classList.add("product-data");let o=document.createElement("h3");o.classList.add("product-title");var i=document.createTextNode(s[r].name);o.appendChild(i),d.appendChild(o);let a=document.createElement("div");a.classList.add("product-desc");i=document.createTextNode(s[r].description);a.appendChild(i),d.appendChild(a);let c=document.createElement("span");c.classList.add("calories"),c.appendChild(document.createTextNode(s[r].calories)),d.appendChild(c);let l=document.createElement("a");l.href=`product.html?id=${s[r].id}`;i=document.createTextNode("Show Details");l.appendChild(i),d.appendChild(l),e.appendChild(n),e.appendChild(d),BossCont.appendChild(e)}}function getEachProd(){let e=window.location.search,d=e.slice(e.indexOf("=")+1),t=new Promise((e,t)=>{let n=new XMLHttpRequest;n.open("GET",`https://coffeshopapi.herokuapp.com/api/products/${d}`,!0),n.onload=function(){4==this.readyState&&200==this.status?e(JSON.parse(this.responseText)):t(Error(req.statusText))},n.onerror=()=>{t(Error("faild to fetch the json object"))},n.send()});t.then(e=>{showEachProd(e)}).catch(e=>{console.log(e)})}getProducts(),getEachProd();let subBoss=document.querySelector("section.singleProduct .mainProdCont");function showEachProd(e){let t=document.createElement("div");t.classList.add("productData");let n=document.createElement("div");n.classList.add("productSubdata"),t.appendChild(n);let d=document.createElement("div");d.classList.add("productImg"),d.style.backgroundImage=`url("${e.image}")`,n.appendChild(d);let o=document.createElement("div");o.classList.add("imgOverlay");let a=document.createElement("div");a.classList.add("overlayTitle"),a.appendChild(document.createTextNode(e.name)),o.appendChild(a);let c=document.createElement("div");c.classList.add("overlayCal"),c.appendChild(document.createTextNode(e.calories)),o.appendChild(c);let l=document.createElement("div");l.classList.add("overlayDesc"),l.appendChild(document.createTextNode(e.description)),o.appendChild(l);let r=document.createElement("div");r.classList.add("overlayNut"),r.appendChild(document.createTextNode(`Ingredients: ${e.nutrition}`)),o.appendChild(r);let s=document.createElement("a");s.classList.add("orderLink"),s.href=`order.html?id=${e.id}`;var i=document.createTextNode("Order Now");s.appendChild(i),o.appendChild(s),d.appendChild(o);let u=document.createElement("div");u.classList.add("spreadingBtn");let m=document.createElement("i");m.classList.add("fa-lock-alt","fal"),u.appendChild(m),n.appendChild(u);let p=document.createElement("div");p.classList.add("productTitle"),p.appendChild(document.createTextNode(e.name)),n.appendChild(p),subBoss.appendChild(t),CommentsPart(e);let h=document.querySelectorAll(".productImg .imgOverlay div"),g=document.querySelector(".spreadingBtn"),y=document.querySelector(".productSubdata .productImg"),v=document.querySelector(".productTitle"),S=document.querySelector(".productImg .imgOverlay");g.addEventListener("click",n=>{h.forEach(e=>{const t=document.querySelector(".clickingAudio");t.play(),y.classList.add("active"),v.classList.add("active"),S.classList.add("active"),e.classList.add("active"),n.target.style.display="none",document.querySelector(".orderLink").classList.add("active")})})}function CommentsPart(e){let t=document.createElement("div");t.classList.add("productComments");let n=document.createElement("div");n.classList.add("addingPart");let d=document.createElement("div");d.appendChild(document.createTextNode("Our clients reviews")),d.classList.add("reviewsParag"),n.appendChild(d);let o=document.createElement("div");o.classList.add("nameField");let a=document.createElement("input");a.type="text",a.setAttribute("required","required"),o.appendChild(a),a.classList.add("authorComment");let c=document.createElement("i");c.classList.add("fas","fa-user","userIcon"),o.appendChild(c),n.appendChild(o);let l=document.createElement("div");l.classList.add("messageField");let r=document.createElement("textarea");r.cols="20",r.rows="20",r.setAttribute("required","required"),l.appendChild(r),n.appendChild(l);let s=document.createElement("i");s.classList.add("fas","fa-envelope"),l.appendChild(s);let i=document.createElement("button");i.appendChild(document.createTextNode("add")),i.classList.add("messageBtn"),n.appendChild(i),t.appendChild(n),subBoss.appendChild(t),console.log(e);let u=document.createElement("div");u.classList.add("showingPart");let m=document.querySelector(".messageBtn"),p=document.querySelector(".authorComment"),h=document.querySelector(".messageField textarea");m.addEventListener("click",()=>{if(""!==p.value&&""!==h.value){document.querySelector(".errMsg")&&document.querySelector(".errMsg").remove();let e={};e.user_name=p.value,e.comment=h.value,e.date=(new Date).toLocaleString(),p.value="",h.value="";let t=document.createElement("div");t.classList.add("singleComment");let n=document.createElement("div");n.classList.add("commentAuthor"),n.appendChild(document.createTextNode(e.user_name));let d=document.createElement("div");d.classList.add("commentDate"),d.appendChild(document.createTextNode(e.date));let o=document.createElement("div");o.classList.add("authAndDate"),o.appendChild(n),o.appendChild(d),t.appendChild(o);let a=document.createElement("div");a.classList.add("commentContent"),a.appendChild(document.createTextNode(e.comment)),t.appendChild(a),u.appendChild(t);let c=window.location.search;var l=c.slice(c.indexOf("=")+1);fetch(`https://coffeshopapi.herokuapp.com/api/products/${l}/comments/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>!0).catch(e=>console.log(e))}else{document.querySelector(".errMsg")&&document.querySelector(".errMsg").remove();let e=document.createElement("div");e.appendChild(document.createTextNode("Please fill the fields.")),e.classList.add("errMsg");let t=document.querySelector(".addingPart");t.appendChild(e)}});let g=e.comments;g.forEach(e=>{let t=document.createElement("div");t.classList.add("singleComment");let n=document.createElement("div");n.classList.add("commentAuthor"),n.appendChild(document.createTextNode(e.user_name));let d=document.createElement("div");d.classList.add("commentDate"),d.appendChild(document.createTextNode(e.time));let o=document.createElement("div");o.classList.add("authAndDate"),o.appendChild(n),o.appendChild(d),t.appendChild(o);let a=document.createElement("div");a.classList.add("commentContent"),a.appendChild(document.createTextNode(e.comment)),t.appendChild(a),u.appendChild(t)}),console.log(g),t.appendChild(u),subBoss.appendChild(t)}function getProd(){let e=window.location.search,d=e.slice(e.indexOf("=")+1),t=new Promise((e,t)=>{let n=new XMLHttpRequest;n.open("GET",`https://coffeshopapi.herokuapp.com/api/products/${d}`,!0),n.onload=function(){4==this.readyState&&200==this.status?e(JSON.parse(this.responseText)):t(Error(req.statusText))},n.onerror=()=>{t(Error("faild to fetch the json object"))},n.send()});t.then(e=>{orderProd(e)}).catch(e=>{console.log(e)})}function orderProd(n){let e=document.querySelector("section.orderPage .container .mainContent"),t=document.createElement("div");t.classList.add("prodOrderDesc");let d=document.createElement("div");d.classList.add("productImgOrder"),d.style.backgroundImage=`url("${n.image}")`,t.appendChild(d);let o=document.createElement("div");o.appendChild(document.createTextNode(n.name)),o.classList.add("prodOrdName"),t.appendChild(o),e.appendChild(t);let a=document.createElement("div");a.classList.add("prodOrd");let c=document.createElement("div");c.classList.add("prodPrice");let l=document.createElement("span");l.appendChild(document.createTextNode(n.price)),c.appendChild(document.createTextNode("Price:")),c.appendChild(l);let r=document.createElement("span");r.appendChild(document.createTextNode("$")),c.appendChild(r);let s=document.createElement("div"),i=document.createElement("input");i.classList.add("count"),i.type="number",i.id="count",i.value="1",i.min="1",i.max="10";let u=document.createElement("label");u.for="count",u.appendChild(document.createTextNode("Amount:")),s.appendChild(u),s.appendChild(i);let m=document.createElement("div");m.classList.add("totalPrice"),m.appendChild(document.createTextNode("Total:")),m.appendChild(document.createElement("span")),a.appendChild(c),a.appendChild(s),a.appendChild(m),e.appendChild(a);let p=document.querySelector(".totalPrice span"),h=document.querySelector(".count"),g=document.querySelector(".prodPrice span");p.textContent=`${g.textContent}$`,h.onchange=e=>{p.textContent=`${e.currentTarget.value*g.textContent}$`};let y=document.createElement("div");y.classList.add("userData");let v=document.createElement("input");v.type="text",v.placeholder="Firstname",v.classList.add("ordFirstName"),y.appendChild(v);let S=document.createElement("input");S.type="text",S.placeholder="Lastname",S.classList.add("ordLastName"),y.appendChild(S);let L=document.createElement("input");L.type="text",L.placeholder="Address",L.classList.add("ordAddr"),y.appendChild(L);let C=document.createElement("input");C.type="text",C.placeholder="Phone number",C.classList.add("ordPhone"),y.appendChild(C);let E=document.createElement("button");E.classList.add("subOrd"),E.textContent="Send",y.appendChild(E),e.appendChild(y);let f=document.createElement("div");f.classList.add("orderModel");let q=document.createElement("div");q.classList.add("orderSent"),f.appendChild(q),e.appendChild(f);let x=document.querySelector(".userData button"),T=document.querySelectorAll(".userData input");x.addEventListener("click",e=>{let p={orderName:n.name,amount:parseInt(document.querySelector("input[type='number']").value),totalPric:document.querySelector(".totalPrice span").textContent,clientName:`${document.querySelector(".userData input[placeholder='Firstname']").value} ${document.querySelector(".userData input[placeholder='Lastname']").value}`,clientAddr:document.querySelector(".userData input[placeholder='Address']").value,clientPhone:document.querySelector(".userData input[placeholder='Phone number']").value};console.log(p),T.forEach(e=>{if(""!==e.value){document.querySelector(".orderSent").innerHTML="";let e=document.createElement("div");e.appendChild(document.createTextNode("Name:"));let t=document.createElement("span");t.appendChild(document.createTextNode(p.clientName)),e.appendChild(t),document.querySelector(".orderSent").appendChild(e);let n=document.createElement("div");n.appendChild(document.createTextNode("Address:"));let d=document.createElement("span");d.appendChild(document.createTextNode(p.clientAddr)),n.appendChild(d),document.querySelector(".orderSent").appendChild(n);let o=document.createElement("div");o.appendChild(document.createTextNode("Phone:"));let a=document.createElement("span");a.appendChild(document.createTextNode(p.clientPhone)),o.appendChild(a),document.querySelector(".orderSent").appendChild(o);let c=document.createElement("div");c.appendChild(document.createTextNode("Order Name:"));let l=document.createElement("span");l.appendChild(document.createTextNode(p.orderName)),c.appendChild(l),document.querySelector(".orderSent").appendChild(c);let r=document.createElement("div");r.appendChild(document.createTextNode("Amount:"));let s=document.createElement("span");s.appendChild(document.createTextNode(p.amount)),r.appendChild(s),document.querySelector(".orderSent").appendChild(r);let i=document.createElement("div");i.appendChild(document.createTextNode("Price:"));let u=document.createElement("span");u.appendChild(document.createTextNode(p.totalPric)),i.appendChild(u),document.querySelector(".orderSent").appendChild(i);let m=document.createElement("button");m.classList.add("confirmBtn"),m.appendChild(document.createTextNode("Confirm")),document.querySelector(".orderSent").appendChild(m),document.querySelector(".orderModel").classList.add("active"),document.querySelector(".orderSent").classList.add("active"),document.querySelector(".userData").classList.add("active")}});let t=document.querySelector(".confirmBtn");t.addEventListener("click",()=>{document.querySelector(".orderModel").classList.remove("active"),document.querySelector(".orderSent").classList.remove("active"),document.querySelector(".userData").classList.remove("active"),T.forEach(e=>{e.value=""});let e=document.createElement("div");e.classList.add("succssOrd"),e.appendChild(document.createTextNode("Order Sent successfully")),document.querySelector(".orderPage").appendChild(e),e.style.animation="fading 15s ease forwards",fetch("https://coffeshopapi.herokuapp.com/api/orders/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).then(e=>!0).catch(e=>console.log(e))})})}getProd(),document.addEventListener("click",e=>{e.target.classList.contains("orderModel")&&(document.querySelector(".orderModel").classList.remove("active"),document.querySelector(".orderSent").classList.remove("active"),document.querySelector(".userData").classList.remove("active"))}),1<localStorage.length?(document.documentElement.style.setProperty("--dominant1-wmode-color",localStorage.getItem("L")),document.documentElement.style.setProperty("--dominant1-bmode-color",localStorage.getItem("D")),document.querySelector("header .searchingBW .dl-mode").classList.add(localStorage.getItem("D-icon")),document.querySelector("header .searchingBW .dl-mode").classList.add(localStorage.getItem("L-icon"))):document.querySelector("header .searchingBW .dl-mode").classList.add("L");let searchingIcon=document.querySelector("header .searchingBW .fa-search"),searchingBox=document.querySelector(".searchingBox");searchingIcon.addEventListener("click",()=>{searchingBox.classList.toggle("active"),document.querySelector(".searchingBox .inputSearch").classList.toggle("inert"),document.querySelector(".searchingBox .inputSearch input").focus(),document.querySelector(".searchingBox .filtering").classList.toggle("inert")}),console.log(searchingBox),document.addEventListener("click",e=>{e.target.classList.contains("inputSearch")||e.target.classList.contains("fa-search")||e.target.classList.contains("Sinput")||searchingBox.classList.contains("active")&&(searchingBox.classList.toggle("active"),document.querySelector(".searchingBox .inputSearch").classList.toggle("inert"),document.querySelector(".searchingBox .filtering").classList.toggle("inert"))});let dlMode=document.querySelector("header .searchingBW .dl-mode");dlMode.addEventListener("click",()=>{document.querySelector("audio").play(),dlMode.classList.toggle("D"),dlMode.classList.toggle("L"),dlMode.classList.contains("D")?(document.documentElement.style.setProperty("--dominant1-wmode-color","#ffffff"),document.documentElement.style.setProperty("--dominant1-bmode-color","#030712"),localStorage.setItem("L","#ffffff"),localStorage.setItem("D","#030712"),localStorage.setItem("D-icon","D"),localStorage.removeItem("L-icon")):(document.documentElement.style.setProperty("--dominant1-bmode-color","#ffffff"),document.documentElement.style.setProperty("--dominant1-wmode-color","#030712"),localStorage.setItem("D","#ffffff"),localStorage.setItem("L","#030712"),localStorage.setItem("L-icon","L"),localStorage.removeItem("D-icon"))});let hamburger=document.querySelector("#nav-icon1"),navLinks=document.querySelector("header ul");hamburger.addEventListener("click",e=>{e.stopPropagation(),e.currentTarget.classList.toggle("open"),navLinks.classList.toggle("open")}),navLinks.addEventListener("click",e=>{e.stopPropagation});let links=document.querySelectorAll("header ul li a"),activeBody=document.querySelector("body").classList.item(0),activeLink=null;for(let e=0;e<links.length;e++)if(links[e].textContent==activeBody){activeLink=links[e];break}activeLink.parentElement.classList.add("active");let Infos=document.querySelector("section.about .infos"),fromTop=Infos.offsetTop,outerHeight=Infos.offsetHeight,screenHeight=this.innerHeight;window.onscroll=()=>{window.pageYOffset>fromTop+outerHeight-2.1*screenHeight&&Infos.classList.add("active")};const carsoulSlide=document.querySelector(".carsol-slides"),carsoulImages=document.querySelectorAll(".carsol-slides img");let counter=1;const size=carsoulImages[0].clientWidth;function nextBtn(){if(counter>=carsoulImages.length-1)return!1;carsoulSlide.style.transition="transform 0.6s ease-in-out",counter++,carsoulSlide.style.transform=`translateX(${-size*counter}px)`}carsoulSlide.style.transform=`translateX(${-size*counter}px)`,setInterval(nextBtn,3e3),carsoulSlide.addEventListener("transitionend",()=>{"last-clone"===carsoulImages[counter].id&&(carsoulSlide.style.transition="none",counter=carsoulImages.length-2,carsoulSlide.style.transform=`translateX(${-size*counter}px)`),"first-clone"===carsoulImages[counter].id&&(carsoulSlide.style.transition="none",counter=carsoulImages.length-counter,carsoulSlide.style.transform=`translateX(${-size*counter}px)`)});let modal=document.querySelector(".main-products-cont .modal"),previewImgs=document.querySelectorAll(".main-products-cont .product-cont .product img"),fullImg=document.querySelector(".main-products-cont .modal img"),caption=document.querySelector(".main-products-cont .modal p");previewImgs.forEach(e=>{e.addEventListener("click",()=>{document.querySelector("#clicking").play(),fullImg.src=e.src,caption.textContent=e.alt,modal.classList.add("open"),fullImg.classList.add("open")})}),document.addEventListener("click",e=>{e.target.classList.contains("modal")&&(modal.classList.remove("open"),fullImg.classList.remove("open"))});